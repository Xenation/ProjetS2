#version 150 core

in vec2 position;
in vec2 textureUVs;

out vec2 textureCoords;
out float alphaPass;
out vec4 colorInt;
out vec2 fragPos;

uniform mat4 transformationMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform float alpha;
uniform float depth;
uniform float intensityMultiplier;

uniform int sides;

void main(void) {
	
	fragPos = position;
	
	bvec4 bsides;
	for (int i = 0; i < 4; i++) {
		if (((sides >> i) & 1) == 1) {
			bsides[i] = true;
		} else {
			bsides[i] = false;
		}
	}
	
	for (int i = 0; i < 4; i++) {
		if (bsides[i] == true) {
			colorInt[i] = 0.0;
		} else {
			colorInt[i] = intensityMultiplier;
		}
	}
	
	gl_Position = projectionMatrix * viewMatrix * transformationMatrix * vec4(position, depth, 1.0);
	textureCoords = textureUVs;
	alphaPass = alpha;
}